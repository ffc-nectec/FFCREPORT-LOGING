{"version":3,"sources":["components/system/Auth/style.module.scss","components/system/Auth/Login/index.js","pages/system/login/index.js"],"names":["module","exports","auth","container","googleSign","footerNav","temp","Login","_this","Object","classCallCheck","this","_super","call","createTable","table","forEach","element","push","react_default","a","createElement","value","id","name","Data","then","result","setState","loading","state","username","password","redirectToReferrer","handleValidSubmit","bind","assertThisInitialized","onChange","_this2","_this$state","PostData","responseJson","user","localStorage","setItem","JSON","stringify","sessionStorage","code","swal","text","icon","e","idOption","target","defineProperty","d","data","filter","dd","_this$state2","react_router","to","getItem","className","style","color","concat","lib","fontSize","onValidSubmit","onInvalidSubmit","handleInvalidSubmit","Label","for","type","required","disabled","react","fallback","placeholder","Row","Col","Button","Component","SystemLogin","Helmet","title","Auth_Login","React"],"mappings":"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","file":"static/js/12.1dc37b7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"style_auth__1smuV\",\"container\":\"style_container__1_rDj\",\"googleSign\":\"style_googleSign__3DmvN\",\"footerNav\":\"style_footerNav__2WG5n\"};","import React, { Component, Suspense } from 'react'\nimport { Redirect } from 'react-router-dom'\n// import { connect } from 'react-redux'\n// import { Form, Input, Button } from 'antd'\nimport { AvForm, AvGroup, AvInput, AvFeedback } from 'availity-reactstrap-validation'\nimport { Button, Label, Col, Row } from 'reactstrap'\nimport swal from 'sweetalert'\nimport style from '../style.module.scss'\nimport { PostData, Data } from './PostData'\n\nlet temp = null\n\nclass Login extends Component {\n  constructor() {\n    super()\n    this.state = {\n      id: '', // เพิ่ม state id\n      username: '',\n      password: '',\n      redirectToReferrer: false,\n      loading: false,\n    }\n    this.handleValidSubmit = this.handleValidSubmit.bind(this)\n    this.onChange = this.onChange.bind(this)\n  }\n\n  // eslint-disable-next-line consistent-return\n  createTable = () => {\n    const table = []\n    if (!temp || temp === null) {\n      Data().then(result => {\n        temp = result\n        temp.forEach(element => {\n          table.push(<option value={element.id}>{element.name}</option>)\n        })\n        // eslint-disable-next-line react/no-unused-state\n        this.setState({ loading: true })\n        return table\n      })\n    } else {\n      temp.forEach(element => {\n        table.push(<option value={element.id}>{element.name}</option>)\n      })\n\n      return table\n    }\n  }\n\n  handleValidSubmit() {\n    if (this.state) {\n      // ดึงตัวแปรออกมาจาก state ให้ใช้ง่ายๆ\n      const { id, username, password } = this.state\n      // ส่งตัวแปรเข้า PostData น่าจะใช้แค่ username กับ password ปะ???\n      PostData('handleValidSubmit', { username, password }, id).then(result => {\n        const responseJson = result\n        if (responseJson.user) {\n          localStorage.setItem('userdata', JSON.stringify(responseJson))\n          sessionStorage.setItem('userData', JSON.stringify(responseJson))\n          // eslint-disable-next-line react/no-unused-state\n          this.setState({ redirectToReferrer: true })\n        } else if (result.code === 401) {\n          swal({\n            // title: \"Are you sure?\",\n            text: 'ชื่อผู้ใช้ หรือ รหัสไม่ตรงกับในระบบ กรุณาลองใช้ใหม่อีกครั้ง',\n            icon: 'warning',\n          })\n          // eslint-disable-next-line no-alert\n          // alert('ชื่อผู้ใช้ หรือ รหัสไม่ตรงกับในระบบ กรุณาลองใช้ใหม่อีกครั้ง', result.code)\n        }\n      })\n    }\n  }\n\n  // eslint-disable-next-line react/sort-comp\n  onChange(e) {\n    const idOption = e.target.value\n    this.setState({ [e.target.name]: e.target.value })\n    Data().then(d => {\n      let data = ''\n      // eslint-disable-next-line no-return-assign\n      d.filter(dd => (dd.id === idOption ? (data = dd.name) : {}))\n      localStorage.setItem('idOpn', data)\n    })\n  }\n\n  render() {\n    const { loading, redirectToReferrer } = this.state\n    if (redirectToReferrer) {\n      return <Redirect to=\"/dashboard/elderly\" />\n    }\n\n    if (sessionStorage.getItem('userData')) {\n      return <Redirect to=\"/dashboard/elderly\" />\n    }\n\n    return (\n      <div className={style.auth}>\n        <div className=\"pt-5 pb-5 d-flex align-items-end mt-auto\">\n          <div className=\"text-dark font-size-30 mb-2 text-center\" style={{ color: '#1b55e3' }}>\n            เข้าสู่ระบบ\n          </div>\n          {/* <img src=\"resources/images/air-logo.png\" alt=\"AIR UI Logo\" /> */}\n          {/* <div className=\"air__utils__logo__text\">\n            <div className=\"air__utils__logo__name text-uppercase text-dark font-size-21\">\n              AIR UI\n            </div>\n            <div className=\"air__utils__logo__descr text-uppercase font-size-12 text-gray-6\">\n              Admin template\n            </div>\n          </div> */}\n        </div>\n        <div>\n          <center>\n            <h style={{ color: 'red' }}>\n              เนื่องจากข้อมูลเป็นความลับของหน่วยงาน ระบบขอตรวจสอบการเข้าถึง\n            </h>\n            <br />\n            <h style={{ color: 'red' }}>โดย user/password เป็นของระบบฐานข้อมูล JHCIS เดิม</h>\n          </center>\n        </div>\n        <br />\n        <div className={`${style.container} pl-5 pr-5 pt-5 pb-5 bg-white`}>\n          {/* <div className=\"text-dark font-size-30 mb-2 text-center\">Log In</div> */}\n          {/* <div className=\"text-muted text-center mb-4\">\n            Login and password - admin@mediatec.org / mediatec\n          </div> */}\n          <AvForm\n            style={{ fontSize: 18 }}\n            onValidSubmit={this.handleValidSubmit}\n            onInvalidSubmit={this.handleInvalidSubmit}\n          >\n            <AvGroup>\n              <Label for=\"example\">รพ.สต.</Label>\n              {/* เปลี่ยน name เป็น id */}\n              <AvInput type=\"select\" name=\"id\" onChange={this.onChange} loading={loading} required>\n                <option value=\"\" disabled>\n                  --- รพ.สต. ---\n                </option>\n                <Suspense fallback={<div />}>{this.createTable()}</Suspense>\n              </AvInput>\n              <AvFeedback>กรุณาเลือก รพ.สต.</AvFeedback>\n            </AvGroup>\n            <AvGroup>\n              <Label for=\"example\">ชือผู้ใช้</Label>\n              <AvInput name=\"username\" placeholder=\"username\" onChange={this.onChange} required />\n              <AvFeedback>กรุณากรอกชื่อผู้ใช้</AvFeedback>\n            </AvGroup>\n            <AvGroup>\n              <Label for=\"example\">รหัสผ่าน</Label>\n              <AvInput\n                type=\"password\"\n                name=\"password\"\n                id=\"examplePassword\"\n                placeholder=\"password\"\n                onChange={this.onChange}\n                required\n              />\n              <AvFeedback>กรุณากรอกรหัสผ่าน</AvFeedback>\n            </AvGroup>\n            <Row>\n              <Col>\n                <center>\n                  <Button color=\"primary\">เข้าสู่ระบบ</Button>\n                </center>\n                {/* <Link to=\"/signup\">\n                  <Button style={{ marginLeft: 10 }} color=\"primary\" className=\"px-4\">สมัครใช้งาน</Button>\n                </Link> */}\n              </Col>\n              {/* <Col xs=\"4\" className=\"text-right\">\n                <Link to=\"/ForgotPassword\">\n                  <Button color=\"link\" className=\"px-0\">ลืมรหัสผ่าน</Button>\n                </Link>\n              </Col> */}\n            </Row>\n          </AvForm>\n          {/* <Form layout=\"vertical\" hideRequiredMark onSubmit={this.onSubmit} className=\"mb-4\">\n            <Form.Item>\n              {form.getFieldDecorator('email', {\n                initialValue: 'admin@mediatec.org',\n                rules: [{ required: true, message: 'Please input your e-mail address' }],\n              })(<Input size=\"large\" placeholder=\"Email\" />)}\n            </Form.Item>\n            <Form.Item>\n              {form.getFieldDecorator('password', {\n                initialValue: 'mediatec',\n                rules: [{ required: true, message: 'Please input your password' }],\n              })(<Input size=\"large\" type=\"password\" placeholder=\"Password\" />)}\n            </Form.Item>\n            <Button\n              type=\"primary\"\n              size=\"large\"\n              className=\"text-center btn btn-success w-100 font-weight-bold font-size-18\"\n              htmlType=\"submit\"\n              loading={loading}\n            >\n              Log In\n            </Button>\n          </Form> */}\n          {/* <Link\n            to=\"/system/register\"\n            className={`${style.googleSign} font-weight-bold font-size-18 text-dark btn btn-outline-light w-100 mb-3`}\n            style={{ backgroundImage: 'url(resources/images/icons/google-logo.svg)' }}\n          >\n            Log in with Google\n          </Link>\n          <div className=\"text-center\">\n            <Link to=\"/system/forgot-password\" className=\"text-blue font-weight-bold font-size-18\">\n              Forgot password?\n            </Link>\n          </div>\n        </div>\n        <div className=\"text-center font-size-18 pt-4 mb-auto\">\n          <span className=\"mr-2\">Don&apos;t have an account?</span>\n          <Link to=\"/system/register\" className=\"font-weight-bold text-blue text-underlined\">\n            <u>Sign Up</u>\n          </Link> */}\n        </div>\n        <div className=\"mt-auto pb-5 pt-5\">\n          {/* <ul\n            className={`${style.footerNav} list-unstyled d-flex mb-2 flex-wrap justify-content-center`}\n          >\n            <li>\n              <a href=\"javascript: void(0);\">Terms of Use</a>\n            </li>\n            <li>\n              <a href=\"javascript: void(0);\">Compliance</a>\n            </li>\n            <li>\n              <a href=\"javascript: void(0);\">Support</a>\n            </li>\n            <li>\n              <a href=\"javascript: void(0);\">Contacts</a>\n            </li>\n          </ul> */}\n          <div className=\"text-gray-4 text-center\">\n            Copyright © 2019 NSTDA National Science and Technology Development Agency\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Login\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport Login from 'components/system/Auth/Login'\n\nclass SystemLogin extends React.Component {\n  render() {\n    return (\n      <div>\n        <Helmet title=\"Login\" />\n        <Login />\n      </div>\n    )\n  }\n}\n\nexport default SystemLogin\n"],"sourceRoot":""}