(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{629:function(e,t,a){},737:function(e,t,a){"use strict";a.r(t);a(257);var n,o=a(219),r=(a(529),a(574)),l=(a(491),a(496)),i=(a(238),a(104)),s=(a(479),a(484)),c=(a(477),a(478)),g=(a(480),a(15)),u=a(21),d=a(22),m=a(111),p=a(24),h=a(23),b=a(0),f=a.n(b),v=a(33),k=a(50),y=a(171),E=a(469),S=a.n(E),w=a(485),D=a.n(w),C=a(506),L=a(537),O=a(536),j=a(532),M=a(534),N=a(535),z=a(167),x=(a(629),S.a.icon({iconUrl:"https://unpkg.com/leaflet@1.0.1/dist/images/marker-icon-2x.png",iconSize:[25,40],iconAnchor:[12.5,41],popupAnchor:[0,-41]})),I=S.a.icon({iconUrl:"icongreen.png",iconSize:[35,40],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),V=Object(v.c)(function(e){return{settings:e.settings}})(n=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).setStore=function(e){console.log("setstore"),console.log(e,"llll"),localStorage.setItem("userUnit",JSON.stringify(e))},n.onClose=function(){n.setState({selectedVillage:null})},n.handleVisibleChange=function(e){n.setState({visible1:e})},n.showDraggable=function(e){n.setState({showDraggableMarker:!0,villageDrag:e.villageName,noDrag:e.no,idhouse:e})},n.editeDraggable=function(e){n.setState({draggable:!0,villageDrag:e.villageName,noDrag:e.no,idhouse:e})},n.onDrag=function(e){n.setState({dragMarkerLatlng:e.target._latlng})},n.onDragle=function(e,t,a){console.log(t.properties,"id");var o=n.state.geojson,r=e.target._latlng.lat,l=e.target._latlng.lng;t.geometry.coordinates[1]=r,t.geometry.coordinates[0]=l;var i=o;console.log(i,"tmp"),i[a].geometry.coordinates[1]=r,i[a].geometry.coordinates[0]=l,n.setState({geojson:i,newid:t.properties.id,edithouse:t.properties,newlatlng:t.geometry.coordinates}),console.log(r,l,"newlatlng")},n.editnewmarker=function(e,t,a,o,r){console.log(r,"grable");var l=sessionStorage.getItem("userData"),i=JSON.parse(l),s=i.user.orgId;return Object(z.g)(s,i.token,t,e,a,o).then(function(e){n.setState({updatehouse:e,isLoaded:!0})},function(e){n.setState({isLoaded:!0,error:e})}),alert("\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e41\u0e01\u0e49\u0e44\u0e02\u0e1e\u0e34\u0e01\u0e31\u0e14"),window.location.reload()},n.submitok=function(e,t){var a=sessionStorage.getItem("userData"),o=JSON.parse(a),r=o.user.orgId,l=e.id;return Object(z.f)(r,o.token,l,e,t).then(function(e){n.setState({updatehouse:e,isLoaded:!0})},function(e){n.setState({isLoaded:!0,error:e})}),alert("ok"),window.location.reload()},n.handleRemove=function(){n.setState({showDraggableMarker:null})},n.handleDelete=function(){n.setState({editeDraggableMarker:!0})},n.state={geojson:[],person:[],houseaddress:[],haveLocation:[],lat:13.520531624809204,lng:100.00699460506439,submit:"",visible1:!1,selectedVillage:null,isLoaded:!1,error:null,showDraggableMarker:!1,editeDraggableMarker:!0,villageDrag:null,noDrag:null,idhouse:[],updatehouse:[],dragMarkerLatlng:[13.52,100],draggable:!1,newid:"",edithouse:[],newlatlng:[]},n.baseMaps=[{name:"GoogleSatellite",url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",attribution:"&copy; Google",type:"tile",checked:!0},{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",type:"tile"}],n.mapOptions={zoomControl:!1,attributionControl:!1,center:[-29.0529434318608,152.01910972595218],zoom:10,layers:[n.basemaps]},n.handleValidSubmit=n.handleValidSubmit.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.getItem("userData"),a=JSON.parse(t),n=a.user.orgId;Object(z.c)(n,a.token).then(function(t){e.setState({geojson:t.features,isLoaded:!0})},function(t){e.setState({isLoaded:!0,error:t})}),Object(z.h)(n,a.token).then(function(t){e.setState({haveLocation:t,isLoaded:!0})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"handleValidSubmit",value:function(e){console.log(e,"dr.pong"),console.log(e,"values");var t=this.state.haveLocation;console.log(t,"lololocation"),t.find(function(t){return t.no+t.villageName===e})}},{key:"renderBaseLayerControl",value:function(){return f.a.createElement(C.b,{position:"bottomleft"},this.baseMaps.map(function(e){var t=e.name,a=e.url,n=e.attribution,o=e.type,r=e.layer,l=e.format,i=e.checked,s=void 0!==i&&i;return"wms"===o?f.a.createElement(C.b.BaseLayer,{key:t,name:t,checked:s},f.a.createElement(L.a,{layers:r,format:l,transparent:!1,url:a,attribution:n})):f.a.createElement(C.b.BaseLayer,{key:t,name:t,checked:s},f.a.createElement(O.a,{attribution:n,url:a}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.geojson,n=t.lat,u=t.lng,d=t.submit,m=t.isLoaded,p=t.error,h=t.selectedVillage,b=t.person,v=t.visible1,E=t.houseaddress,S=t.haveLocation,w=t.showDraggableMarker,C=t.editeDraggableMarker,L=t.villageDrag,O=t.noDrag,z=t.idhouse,V=t.updatehouse,_=t.dragMarkerLatlng,J=t.draggable,U=t.newid,A=t.edithouse,B=t.newlatlng,q=this.handleValidSubmit;console.log(V,"havavava");var G=a.map(function(e){return e.properties}),R=[n,u];function T(){window.location.reload()}console.log(a,"mapapapapap"),console.log(h,b),console.log(E,C,"themask");var H=function(){return f.a.createElement(s.a,{style:{width:350,Color:"#000"},onSelect:function(t){e.setState({submit:t})},dataSource:G.map(function(e){return e.no+e.villageName}),defaultValue:d,placeholder:"\u0e1a\u0e49\u0e32\u0e19\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48 / \u0e2b\u0e21\u0e39\u0e48\u0e1a\u0e49\u0e32\u0e19",filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}},f.a.createElement(c.a,{suffix:f.a.createElement(g.a,{type:"search",onClick:T,className:"certain-category-icon"}),allowClear:!0}))},Y=S.map(function(t){return f.a.createElement(r.a,{layout:"vertical",onChange:q},f.a.createElement(l.a,{gutter:16},f.a.createElement(i.a,{style:{width:260},onClick:function(){return e.showDraggable(t)},onChange:q},t.no,"\xa0",t.villageName)))});return p?f.a.createElement("div",null,"Error: ",p.message):m?f.a.createElement("div",null,f.a.createElement(k.Helmet,{title:"Dashboard: Crypto"}),f.a.createElement("div",{className:"air__utils__heading"},f.a.createElement("h5",null,"\u0e41\u0e01\u0e49\u0e44\u0e02")),f.a.createElement(H,null),f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement(j.a,{style:{height:"70vh"},center:R,zoom:14},f.a.createElement(D.a,{position:"topleft"}),this.renderBaseLayerControl(),C&&a.map(function(t,n){var o=[t.geometry.coordinates[1],t.geometry.coordinates[0]],r=x;return d&&t.properties.no+t.properties.villageName===d&&(r=I),f.a.createElement(M.a,{key:"draggable-marker",marker_index:"draggable-marker ".concat(n),draggable:J,onDragend:function(a){return e.onDragle(a,t,n)},position:o,icon:r},f.a.createElement(N.a,null,f.a.createElement("span",null,f.a.createElement("p",null,"\u0e2b\u0e21\u0e39\u0e48\u0e1a\u0e49\u0e32\u0e19:",t.properties.villageName),f.a.createElement("p",null,"\u0e1a\u0e49\u0e32\u0e19\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48:",t.properties.no),f.a.createElement("p",null,t.geometry.coordinates[1],",",t.geometry.coordinates[0])),!0===J&&f.a.createElement(l.a,null,f.a.createElement(i.a,{onClick:function(){return e.editnewmarker(U,a,A,B,J)}},"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),"\xa0",f.a.createElement(i.a,{onClick:e.handleDelete},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"))))}),w&&f.a.createElement(M.a,{key:"draggable-marker",marker_index:"draggable-marker",style:{position:"absolute",zIndex:4e3},position:_,draggable:!0,onDragend:this.onDrag,icon:I,onChange:this.zoomIn},f.a.createElement(N.a,null,f.a.createElement("span",null,f.a.createElement("p",null,"\u0e2b\u0e21\u0e39\u0e48\u0e1a\u0e49\u0e32\u0e19:",L),f.a.createElement("p",null,"\u0e1a\u0e49\u0e32\u0e19\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48:",O)),f.a.createElement(l.a,null,f.a.createElement(i.a,{onClick:function(){return e.submitok(z,_)}},"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"),"\xa0",f.a.createElement(i.a,{onClick:this.handleRemove},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01")))),f.a.createElement(o.a,{trigger:"click",visible:v,onVisibleChange:this.handleVisibleChange,overlayStyle:{height:"50vh",overflowY:"auto"},content:Y},f.a.createElement(i.a,{style:{position:"absolute",marginTop:280,left:10,padding:10,width:35,zIndex:400}},f.a.createElement("i",{className:"icmn-plus"}))),f.a.createElement(i.a,{style:{position:"absolute",marginTop:240,left:10,padding:10,width:35,zIndex:400},onClick:this.editeDraggable},f.a.createElement("i",{className:"fe fe-edit-3"}))),f.a.createElement("br",null),f.a.createElement(y.a,null)):f.a.createElement("div",null,"Loading...")}}]),a}(f.a.Component))||n;t.default=V}}]);
//# sourceMappingURL=11.c77bf851.chunk.js.map